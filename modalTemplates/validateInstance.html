
<div>

    <style>
        .myLink  {
            cursor: pointer;
            color: blue;
        }
        .pass {
            color:green;
        }
        .fail {
            color:red;
        }
    </style>

    <!--<div ng-controller="newResourceCtrl">-->
    <div class="modal-header">

        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-6">
                <h3 class="modal-title">Validate Instance</h3>

            </div>
            <div class="col-md-6 col-sm-6 col-xs-6">

                <select class="form-control"
                        ng-change="selectServer(input.dataServer)"
                        ng-options="value.name for value in config.allKnownServers track by value.name"
                        ng-model="input.server">

                </select>

                <select class="form-control"
                        ng-change="selectServer(input.dataServer)"
                        ng-options="item for item in profilesThisType"
                        ng-model="input.profile">

                </select>





            </div>

        </div>

    </div>
    <div class="modal-body">


        <div class="row">
            <div class="col-md-2 col-sm-2">
                <div><button class="btn btn-primary form-control" ng-click="input.show='raw'">Json</button> </div>
                <br/>
                <div ng-show="instance"><button class="btn btn-primary form-control" ng-click="parse()">Parse</button> </div>
                <br/>
                <div ng-show="instance"><button class="btn btn-primary form-control" ng-click="input.show='results'">Results</button> </div>
                <br/> <br/>
                <div ng-show="instance">
                <button  class="btn btn-danger form-control" ng-click="validate()">Validate</button>
                </div>
            </div>
            <div class="col-md-10 col-sm-10">


                <div ng-show="input.show == 'raw'">

                    <div class="row">
                        <div class="col-md-10 col-sm-10">

                        </div>
                        <div class="col-md-2 col-sm-2">
                            <button class="btn btn-primary" ng-click="load()">Load</button>
                        </div>
                    </div>

                     <textarea  ng-model="instance" placeholder="Copy the JSON resource to be validated here"
                                class="form-control" rows="18"></textarea>
                </div>

                <div ng-show="input.show == 'parse'">
                    <h4>Resource type: {{resource.resourceType}}</h4>
                    <h5>Profiles claimed conformant:</h5>

                    <h5>Extensions in resource:</h5>
                    <table class="table-bordered table table-condensed">
                        <tr ng-repeat="ext in extensions">
                            <td>

                                <div class="row">
                                    <div class="col-md-10 col=sm-10">
                                        {{ext.url}}
                                        <div>Path: <em>{{ext.path}}</em></div>
                                    </div>
                                    <div class="col-md-1 col=sm-1">
                                        <span class="myLink" ng-click="extValue[$index] = !extValue[$index]">Value</span>
                                    </div>
                                    <div class="col-md-1 col=sm-1">
                                        <div ng-show="ext.sdef">
                                            <i class="glyphicon glyphicon-ok pass"></i>

                                        </div>
                                        <div ng-show="ext.noSdef">
                                            <i class="glyphicon glyphicon-remove fail"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col=sm-12">
                                        <pre ng-show="extValue[$index]" >{{ext.value | json:2}}</pre>
                                    </div>

                                </div>
                            </td>
                        </tr>
                    </table>
                    <div class="row">
                        <div class="col-md-12 col=sm-12">
                            <span class="myLink pull-right" ng-click="checkServerHasDefs()">Check server has Extension Definitions</span>
                        </div>
                    </div>
                </div>



                <div ng-show="input.show =='results'">
                    <h4>Results</h4>

                    <uib-alert type="success"
                               ng-show="validateResults.outcome">
                        {{validateResults.outcome}}
                    </uib-alert>

                    <uib-alert  type="warning"
                               ng-show="validateResults && validateResults.issue && validateResults.issue.length > 0">
                        <div>Sorry, there were some issues:</div>
                        <br/>
                        <p ng-bind-html="error"></p>

                        <table class="table table-bordered">
                            <tr><th>Severity</th><th>Code</th><th>Details/Diagnostics</th><th>Location</th></tr>
                            <tr ng-repeat = "iss in validateResults.issue">
                                <td>{{iss.severity}}</td>
                                <td>{{iss.code}}</td>
                                <td>{{iss.details.text}}
                                    <div>{{iss.diagnostics}}</div>
                                </td>
                                <td><div ng-repeat="loc in iss.location">{{loc}}</div></td>
                            </tr>
                        </table>

                    </uib-alert>

                </div>

            </div>


        </div>

    </div>

    <div class="modal-header">
        <div class="row">
        <div class="col-md-6 col-sm-6 col-xs-6">
            <div>{{url}} <img ng-show='waiting' src="css/ajax_loader_blue_32.gif"/></div>


        </div>
        <div class="col-md-6 col-sm-6 col-xs-6">
            <div class="pull-right">

                <div>

                    <button  class="btn btn-warning" ng-click="$dismiss()">Close</button>

                </div>


            </div>

        </div>

        </div>
    </div>

</div>
